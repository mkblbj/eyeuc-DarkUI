@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base theme tokens for 2K-like dark styling */
:root {
  --brand-red: 220 38 38; /* tailwind red-600 */
  --brand-accent: 234 88 12; /* orange-600 */
}

html.dark {
  color-scheme: dark;
}

/* Basic typography */
body {
  font-feature-settings:
    "liga" 1,
    "calt" 1;
}

/* Japanese font styling - 明朝体 (Mincho/Serif) for Japanese text only */
html[lang="ja-JP"] {
  font-family: "Yu Mincho", "YuMincho", "Hiragino Mincho Pro", "Hiragino Mincho ProN", "MS PMincho", "Noto Serif CJK JP", serif;
}

/* Prevent line breaks in welcome text for Japanese and allow full display */
html[lang="ja-JP"] .welcome-text {
  white-space: nowrap;
  max-width: none;
}

/* Ensure English text and logo keep default fonts */
html[lang="ja-JP"] h1[style*="Bebas Neue"],
html[lang="ja-JP"] [style*="Bebas Neue"],
html[lang="ja-JP"] .mods-locker-logo {
  font-family: "Bebas Neue", system-ui, sans-serif !important;
}

/* Keep default fonts for specific elements in Japanese mode */
html[lang="ja-JP"] button,
html[lang="ja-JP"] input,
html[lang="ja-JP"] select,
html[lang="ja-JP"] .card-2k,
html[lang="ja-JP"] nav {
  font-family: system-ui, -apple-system, sans-serif !important;
}

/* Transparent body for acrylic/mica */
html,
body {
  background-color: transparent;
}

/* Drag region helpers */
[data-tauri-drag-region="true"],
[data-tauri-drag-region] {
  -webkit-app-region: drag;
}
[data-tauri-drag-region="false"] {
  -webkit-app-region: no-drag;
}

/* Subtle grid + glow background */
/* Basket net background (diagonal mesh) */
.grid-bg {
  background-image:
    radial-gradient(
      ellipse at 20% 10%,
      rgba(220, 38, 38, 0.1),
      transparent 40%
    ),
    radial-gradient(
      ellipse at 80% 0%,
      rgba(234, 88, 12, 0.08),
      transparent 45%
    ),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.03), transparent 20%),
    /* softer net: thinner lines, larger spacing, lower alpha */
      repeating-linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.035) 0 1px,
        transparent 1px 34px
      ),
    repeating-linear-gradient(
      -45deg,
      rgba(255, 255, 255, 0.035) 0 1px,
      transparent 1px 34px
    );
  background-size:
    100% 100%,
    100% 100%,
    100% 100%,
    34px 34px,
    34px 34px;
  background-position:
    center,
    center,
    top,
    0 0,
    0 0;
  background-repeat: no-repeat, no-repeat, no-repeat, repeat, repeat;
  opacity: 0.55;
}

.vignette {
  background: radial-gradient(
    120% 120% at 50% 50%,
    transparent 60%,
    rgba(0, 0, 0, 0.7) 100%
  );
  pointer-events: none;
}

/* Dotted noise overlay */
.noise {
  background-image: radial-gradient(
    rgba(255, 255, 255, 0.04) 1px,
    transparent 1px
  );
  background-size: 3px 3px;
}

/* 2K glowing card */
.card-2k {
  position: relative;
  border-radius: 0.75rem;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.05),
    rgba(255, 255, 255, 0.02)
  );
}
.card-2k::before {
  content: "";
  position: absolute;
  inset: 0;
  padding: 1px;
  border-radius: inherit;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.15),
    rgba(255, 0, 0, 0.35),
    rgba(255, 255, 255, 0.15)
  );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Button gloss sweep */
.btn-2k {
  position: relative;
}
.btn-2k .gloss {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    120deg,
    rgba(255, 255, 255, 0) 30%,
    rgba(255, 255, 255, 0.35) 50%,
    rgba(255, 255, 255, 0) 70%
  );
  transform: translateX(-120%);
  opacity: 0;
}
.btn-2k:hover .gloss,
.btn-2k:focus .gloss {
  opacity: 0.7;
  animation: sweep 1.6s ease-in-out 1 forwards;
}

@keyframes sweep {
  0% {
    transform: translateX(-120%);
  }
  60% {
    transform: translateX(120%);
  }
  100% {
    transform: translateX(120%);
  }
}

/* Custom titlebar helpers */
.drag {
  -webkit-app-region: drag;
}
.no-drag {
  -webkit-app-region: no-drag;
}
.win-btn {
  height: 1.75rem;
  width: 2rem;
  border-radius: 0.375rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color 0.15s ease-in-out;
}
.win-btn:hover {
  background: rgba(255, 255, 255, 0.06);
}
.win-btn.close:hover {
  background: rgba(220, 38, 38, 0.85);
}

/* Toast: frosted glass feel aligning with dark theme */
.sonner-toaster {
  --sonner-z-index: 9999;
}
.sonner-toast,
.toast-frosted {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: rgba(24, 24, 27, 0.55) !important; /* zinc-900 @ 55% */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.45);
}
/* Tint by type: dark frosted green/red/amber/blue */
.sonner-toast[data-type="success"],
.toast-frosted[data-type="success"] {
  background:
    linear-gradient(135deg, rgba(6, 95, 70, 0.35), rgba(6, 78, 59, 0.18)),
    rgba(24, 24, 27, 0.45) !important;
  border-color: rgba(16, 185, 129, 0.35) !important; /* emerald-500 */
}
.sonner-toast[data-type="error"],
.toast-frosted[data-type="error"] {
  background:
    linear-gradient(135deg, rgba(127, 29, 29, 0.35), rgba(153, 27, 27, 0.18)),
    rgba(24, 24, 27, 0.45) !important;
  border-color: rgba(239, 68, 68, 0.35) !important; /* red-500 */
}
.sonner-toast[data-type="warning"],
.toast-frosted[data-type="warning"] {
  background:
    linear-gradient(135deg, rgba(120, 53, 15, 0.35), rgba(146, 64, 14, 0.18)),
    rgba(24, 24, 27, 0.45) !important;
  border-color: rgba(245, 158, 11, 0.35) !important; /* amber-500 */
}
.sonner-toast[data-type="info"],
.toast-frosted[data-type="info"] {
  background:
    linear-gradient(135deg, rgba(30, 58, 138, 0.35), rgba(29, 78, 216, 0.18)),
    rgba(24, 24, 27, 0.45) !important;
  border-color: rgba(59, 130, 246, 0.35) !important; /* blue-500 */
}
.sonner-toast .sonner-title,
.toast-title {
  color: rgb(244 244 245) !important;
}
.sonner-toast .sonner-description,
.toast-desc {
  color: rgb(212 212 216) !important;
}
/* Consistent icon sizing */
.win-icon {
  width: 14px;
  height: 14px;
  color: rgb(245 245 245 / 0.92);
  display: block;
  flex-shrink: 0;
}
.icon-restore {
  display: none;
}
button[data-maximized="true"] .icon-max {
  display: none;
}
button[data-maximized="true"] .icon-restore {
  display: block;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* 全局自定义滚动条样式 - 仅滚动时显示 */
@layer base {
  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }
  
  *:hover,
  *:focus-within {
    scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
  }
  
  .dark *:hover,
  .dark *:focus-within {
    scrollbar-color: rgba(115, 115, 115, 0.4) transparent;
  }
  
  /* Webkit (Chrome, Safari, Edge) */
  *::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  *::-webkit-scrollbar-track {
    background: transparent;
  }
  
  *::-webkit-scrollbar-thumb {
    background: transparent;
    border-radius: 4px;
    transition: background 0.2s ease;
  }
  
  *:hover::-webkit-scrollbar-thumb,
  *:focus-within::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.3);
  }
  
  .dark *:hover::-webkit-scrollbar-thumb,
  .dark *:focus-within::-webkit-scrollbar-thumb {
    background: rgba(115, 115, 115, 0.4);
  }
  
  *::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.5) !important;
  }
  
  .dark *::-webkit-scrollbar-thumb:hover {
    background: rgba(115, 115, 115, 0.6) !important;
  }
  
  *::-webkit-scrollbar-corner {
    background: transparent;
  }
}

/* 保留旧的工具类以兼容现有代码 */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  
  .scrollbar-thumb-muted {
    scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
  }
  
  .scrollbar-track-transparent {
    scrollbar-track-color: transparent;
  }
}
